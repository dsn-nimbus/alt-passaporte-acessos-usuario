!function(i){"use strict";i.module("alt.passaporte-acessos-usuario",[]).service("altPassaporteAcessosUsuario",[function(){this._assinante=null,this._assinantePreenchidoInicializacao=!1,this._assinantePreenchido=function(){return!!this._assinante&&!!this._assinantePreenchidoInicializacao},this.inicializa=function(e){if(!i.isObject(e)||!Object.keys(e).length)throw new TypeError("Parâmetro de inicialização deve ser um objeto.");if(!i.isArray(e.produtos)||!e.produtos.length)throw new TypeError("Parâmetro de inicialização deve conter um array de produtos.");i.forEach(e.produtos,function(e){if(!(e.isModulo||i.isArray(e.funcionalidades)&&e.funcionalidades.length))throw new TypeError("Parâmetro de inicialização deve conter um array de funcionalidades dentro do produto.")}),this._assinante=e,this._assinantePreenchidoInicializacao=!0},this.temAcessoFuncionalidade=function(i){if(!this._assinantePreenchido())throw new TypeError("Assinante não inicializado, utilize .inicializa(assinante).");if(!i)throw new TypeError("Funcionalidade não informada para verificação de acesso.");for(var e=this._assinante.produtos.length-1;e>=0;e--)for(var a=0,n=this._assinante.produtos[e].funcionalidades.length;n>a;a++)if(this._assinante.produtos[e].funcionalidades[a].idExterno===i)return!0;return!1},this.temAcessoProduto=function(i){if(!this._assinantePreenchido())throw new TypeError("Assinante não inicializado, utilize .inicializa(assinante).");if(!i)throw new TypeError("Chave do produto não informada para verificação de acesso.");for(var e=0,a=this._assinante.produtos.length;a>e;e++){if(this._assinante.produtos[e].chaveProduto===i)return!0;for(var n=0,o=this._assinante.produtos[e].dependencias.length;o>n;n++)if(this._assinante.produtos[e].dependencias[n].chaveProduto===i)return!0}return!1},this.atualiza=function(e){if(!this._assinantePreenchido())throw new TypeError("Assinante não inicializado, utilize .inicializa(assinante).");if(!i.isObject(e)||!Object.keys(e).length)throw new TypeError("Parâmetro de atualização deve ser um objeto.");if(!i.isArray(e.produtos)||!e.produtos.length)throw new TypeError("Parâmetro de atualização deve conter um array de produtos.");i.forEach(e.produtos,function(e){if(!i.isArray(e.funcionalidades)||!e.funcionalidades.length)throw new TypeError("Parâmetro de atualização deve conter um array de funcionalidades dentro do produto.")}),this._assinante=e}}])}(window.angular);