!function(i){"use strict";i.module("alt.passaporte-acessos-usuario",[]).service("altPassaporteAcessosUsuario",[function(){this._assinante=null,this._assinantePreenchidoInicializacao=!1,this._assinantePreenchido=function(){return!!this._assinante&&!!this._assinantePreenchidoInicializacao},this.inicializa=function(i){if(!angular.isObject(i)||!Object.keys(i).length)throw new TypeError("Parâmetro de inicialização deve ser um objeto.");if(!angular.isArray(i.produtos)||!i.produtos.length)throw new TypeError("Parâmetro de inicialização deve conter um array de produtos.");angular.forEach(i.produtos,function(i){if(!angular.isArray(i.funcionalidades)||!i.funcionalidades.length)throw new TypeError("Parâmetro de inicialização deve conter um array de funcionalidades dentro do produto.")}),this._assinante=i,this._assinantePreenchidoInicializacao=!0},this.temAcessoFuncionalidade=function(i){if(!this._assinantePreenchido())throw new TypeError("Assinante não inicializado, utilize .inicializa(assinante).");if(!i)throw new TypeError("Funcionalidade não informada para verificação de acesso.");for(var a=this._assinante.produtos.length-1;a>=0;a--)for(var n=0,e=this._assinante.produtos[a].funcionalidades.length;e>n;n++)if(this._assinante.produtos[a].funcionalidades[n].idExterno===i)return!0;return!1},this.temAcessoProduto=function(i){if(!this._assinantePreenchido())throw new TypeError("Assinante não inicializado, utilize .inicializa(assinante).");if(!i)throw new TypeError("Chave do produto não informada para verificação de acesso.");for(var a=this._assinante.produtos.length-1;a>=0;a--)if(this._assinante.produtos[a].chaveProduto===i)return!0;return!1},this.atualiza=function(i){if(!this._assinantePreenchido())throw new TypeError("Assinante não inicializado, utilize .inicializa(assinante).");if(!angular.isObject(i)||!Object.keys(i).length)throw new TypeError("Parâmetro de atualização deve ser um objeto.");if(!angular.isArray(i.produtos)||!i.produtos.length)throw new TypeError("Parâmetro de atualização deve conter um array de produtos.");angular.forEach(i.produtos,function(i){if(!angular.isArray(i.funcionalidades)||!i.funcionalidades.length)throw new TypeError("Parâmetro de atualização deve conter um array de funcionalidades dentro do produto.")}),this._assinante=i}}])}(window.angular);